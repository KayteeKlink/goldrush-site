<!-- upcoming-gigs -->
{% if site.locale and site.locale != "" and site.locale != nil %}
<section class="page-section" id="{{ site.data.sitetext[site.locale].upcoming-gigs.section | default: " upcoming-gigs" }}">
  <div class="container">

    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">{{ site.data.sitetext[site.locale].upcoming-gigs.title | default: "upcoming-gigs" }}
        </h2>
        {% if site.data.sitetext[site.locale].upcoming-gigs.text %}
        {% endif %}
      </div>
    </div>

    <div id="upcoming-gigs"></div>
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        fetch('https://rest.bandsintown.com/artists/15547753-goldrush/events?app_id=goldrushsite')
          .then(response => response.json())
          .then(data => {
            const gigsContainer = document.getElementById('upcoming-gigs');
            if(data.length === 0) {
              gigsContainer.innerHTML = '<p>No upcoming gigs.</p>';
            } else {
              data.forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.innerHTML = `
                  <h3>${event.venue.name} - ${event.venue.city}, ${event.venue.country}</h3>
                  <p>${new Date(event.datetime).toDateString()}</p>
                  <a href="${event.url}" target="_blank">Buy Tickets</a>
                `;
                gigsContainer.appendChild(eventElement);
              });
            }
          })
          .catch(error => console.error('Error fetching gigs:', error));
      });
    </script>

  </div>
</section>
{% else %}
<section class="page-section" id="{{ site.data.sitetext.upcoming-gigs.section | default: " upcoming-gigs" }}">
  <div class="container">

    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">{{ site.data.sitetext.upcoming-gigs.title | default: "upcoming-gigs" }}</h2>
        {% if site.data.sitetext.upcoming-gigs.text %}
        {% endif %}
      </div>
    </div>

    <div class="row text-center">
      {% for upcoming-gig in site.data.sitetext.upcoming-gigs.list %}
      <div class="col-md-4">
        <span class="fa-stack fa-4x">
          <i class="fas fa-circle fa-stack-2x text-primary"></i>
          <i class="{{ upcoming-gig.icon | default: " fas fa-shopping-cart" }} fa-stack-1x fa-inverse"></i>
        </span>
        <h4 class="upcoming-gig-heading">{{ upcoming-gig.title | markdownify }}</h4>
        {% if upcoming-gig.desc %}<div class="text-muted">{{ upcoming-gig.desc | markdownify }}</div>{% endif %}
      </div>
      {% endfor %}
    </div>

  </div>
</section>
{% endif %}
<!-- End upcoming-gigs -->